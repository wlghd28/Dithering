2.2 클리핑없는 DBS 기반 하프 토닝

다음에서는 30에서 제안 된 클리핑없는 DBS 기반 하프 토닝을 검토합니다.
이 DBS 기반 하프 토닝 방법의 핵심 아이디어는 D보다 작거나 1D보다 큰 강도를 가진 픽셀에 순서 디더를 사용하고 DBS를 사용하는 것입니다.

먼저 그림자에 사용 된 크기 m x m의 임계 값 어레이 (T)가 결정된다. 
이 T는 D 이하의 픽셀 값에 사용되므로, D보다 큰 임계 값을 결정할 필요가 없다. 
따라서, 각각의 i (0 <= i <= D)에 대해, T의 m ^ 2 / 255 요소는 i / 255 값이 된다. 
1-D보다 큰 강도를 갖는 하이라이트 픽셀의 경우, T` = 1-T가되도록 임계 값 배열 T`를 사용할 수 있습니다.

T를 결정하는 목적은 임계 값을 T로 균일하게 분포시키는 것이다. 균일 성은 다음과 같이 정의된다. 
u (i, j)는 t (i, j) 이하의 가장 가까운 임계 값까지의 유클리드 거리를 나타냅니다. 
즉, u (i, j) = min {루트 ((i-i`) ^ 2 + (j-j`) ^ 2) | t (i`, j`) <= t (i, j)}. 
T의 균일 성 u (T)는 u (i, j)의 합입니다.


임계 값은 T에서 0/255 ~ m ^ 2 / 255 요소에 할당됩니다.
이를 위해 T에서 m ^ 2 / 255 요소를 임의로 선택하고 0/255를 할당합니다. 
그런 다음 균일 성 u (T)가 증가하면 각 0/255를 이웃 요소로 이동합니다. 
독자는이 작업이 DBS의 스와핑 작업과 매우 유사하다는 것을 확인하는 데 어려움이 없어야합니다. 
u (T)를 더 이상 개선 할 수 없을 때까지 이 스와핑 작업이 반복됩니다. 
다음으로 임계 값 1/255를 T의 m ^ 2 / 255 요소에 할당합니다. 
마찬가지로, 0/255가 할당되지 않은 m ^ 2 / 255 요소를 선택하고 1/255를 할당합니다.
그런 다음 임계 값이 1/255 인 이러한 요소에 대해 스와핑 작업이 수행됩니다. 
0/255에서 D까지의 임계 값이 결정될 때까지 동일한 절차가 반복됩니다.
T가 작 으면, 생성 된 이진 이미지는 주파수 m x m 픽셀을 갖는 주기적 아티팩트를 가질 수있다. 
따라서 T는 가능한 한 커야합니다. 실험 30에서, 크기 512 x 512의 임계 값 어레이는 충분히 크다.

이제 클리핑없는 DBS 기반 하프 토닝을 설명 할 수있는 위치에 있습니다. 
하프 톤 될 그레이 스케일 이미지 A가 주어진다고 가정하자. 
먼저 a (i, j) < D 또는 a (i, j) > 1-D가되도록 A의 픽셀 a (i, j)에 임계 값 배열 T를 적용하고 이진 이미지 B를 얻습니다. 
모든 픽셀에 대해 다음과 같이 결정 / 미결정 된 라벨 : 
b (i, j)는, if (a (i, j) <D and b (i, j) = 1) 또는 (a (i, j)> 1- D와 b (i, j) = 0)이면 결정되고, 그렇지 않으면 b (i, j)는 결정되지 않습니다.

즉, b (i, j)가 그림자 또는 하이라이트의 소수 픽셀이면 결정된 픽셀입니다. 그 후, 결정되지 않은 모든 픽셀들에 대해, 
즉 에러의 개선이 더 이상 가능하지 않을 때까지 래스터 스캔 순서에서 반복되는 토글 링 및 스와핑 동작에 대해 DBS가 실행된다.
위와 같이 원본 회색조 이미지 A의 하프 톤 이진 이미지를 계산하는 클리핑없는 DBS 기반 하프 토닝의 개요는 다음과 같습니다.

1 단계 : 초기화
먼저 임계 값 배열 T를 적용하여 모든 픽셀에 결정 / 결정되지 않은 레이블을 할당합니다. 
이진 이미지 B를 얻도록 라벨이 결정되면, b (i, j)는 임계 값 어레이 T에 의해 하프 톤되고, 
라벨이 결정되지 않으면, b (i, j)는 랜덤 디더링 방법에 의해 하프 톤된다.
랜덤 디더링 방법에서, 이진 픽셀은 원 이미지의 대응 픽셀의 픽셀 값이 p (E [0,1])이면 확률 p를 갖는 값 1을 취한다. 
따라서, 결정된 픽셀을 제외한 모든 i 및 j에 대해 확률 a (i, j)를 갖는 b (i, j) = 1이다. 
단계 2에서, 결정된 픽셀이 고정되고 결정되지 않은 픽셀에 대해 DBS가 수행된다.

2 단계 : DBS
래스터 스캔 순서에서 왼쪽 위 모서리에서 오른쪽 아래 모서리까지 B에서 결정되지 않은 픽셀 b (i, j)를 하나씩 선택합니다. 
우리는 토글 및 스왑 작업 중 하나를 선택하여 총 오류를 최소화하고 이러한 작업으로 픽셀을 업데이트합니다.
래스터 스캔 순서에 따른 이 업데이트 절차는 왼쪽 위 모서리에서 오른쪽 아래 모서리까지 한 번의 래스터 스캔 검색이
픽셀을 업데이트하지 않고 오류가 개선되지 않을 때까지 반복됩니다.

시그마 = 1.2, gaussian flither size = 9, threshold array of size = 512 x 512, threshold value D = 9/255.